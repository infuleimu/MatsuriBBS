<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

    <mapper namespace="com.cn.matsuribbs.mapper.SubReplyMapper">

        <resultMap id="SubReplyBean" type="subReply">
            <id column="id" property="id" />
            <result column="content" property="content" />
            <result column="replyDate" property="replyDate" />
            <result column="likeNum" property="likeNum" />
            <association property="author" javaType="User">
                <id column="id" property="id" />
                <result column="userName" property="userName" />
                <result column="avatar" property="avatar" />
            </association>
        </resultMap>
        <select id="selectByReplyIdFun" parameterType="PageBean" resultMap="SubReplyBean">
            SELECT r.*,u.id,u.userName,u.avatar from sub_reply r, user u where r.uid = u.id and r.rid = #{id} order by r.replyDate limit #{offset},#{limit}
        </select>

        <select id="selectCountByPageFun" parameterType="PageBean" resultType="int">
            SELECT count(*) FROM sub_reply where rid=#{id}
        </select>

        <select id="selectByIDFun" parameterType="int" resultType="subReply">
            SELECT * FROM sub_reply where id=#{id}
        </select>

        <insert id="insertFun" parameterType="reply">
			insert into sub_reply(uid,rid,content,replyDate,likeNum)
			values(#{uid},#{rid},#{content},#{replyDate},#{likeNum})
		</insert>

		<delete id="deleteFun" parameterType="int">
			delete from sub_reply where id=#{id}
		</delete>

    </mapper>